apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: '[{"apiVersion":"charts.helm.k8s.io/v1alpha1","kind":"Airflow","metadata":{"name":"example"},"spec":{"airflow":{"config":{},"connections":{},"executor":"Celery","fernetKey":"","image":{"pullPolicy":"IfNotPresent","pullSecret":null,"repository":"puckel/docker-airflow","tag":"1.10.0-4"},"initRetryLoop":null,"podDisruptionBudget":{"maxUnavailable":1},"schedulerDoPickle":true,"schedulerNumRuns":"-1","service":{"type":"ClusterIP"},"webReplicas":1},"dags":{"doNotPickle":false,"git":{"ref":"master","url":null},"initContainer":{"enabled":false,"image":{"pullPolicy":"IfNotPresent","repository":"alpine/git","tag":"1.0.4"},"installRequirements":true},"path":"/usr/local/airflow/dags"},"existingAirflowSecret":"","ingress":{"enabled":false,"flower":{"annotations":null,"host":"","livenessPath":"/","path":"","tls":{"enabled":false}},"web":{"annotations":null,"host":"","path":"","tls":{"enabled":false}}},"persistence":{"accessMode":"ReadWriteOnce","enabled":false,"size":"1Gi"},"postgresql":{"enabled":true,"persistence":{"accessMode":"ReadWriteOnce","enabled":true},"postgresDatabase":"airflow","postgresPassword":"airflow","postgresUser":"postgres","service":{"port":5432}},"rbac":{"create":true},"redis":{"cluster":{"enabled":false},"enabled":true,"master":{"persistence":{"accessMode":"ReadWriteOnce","enabled":false}},"password":"airflow"},"serviceAccount":{"create":true,"name":null},"workers":{"celery":{"instances":1},"enabled":true,"pod":{"annotations":null},"replicas":1,"resources":{},"secrets":[],"secretsDir":"/var/airflow/secrets"}}}]'
    categories: Helm
    description: Airflow
    containerImage: quay.io/helmoperators/airflow:0.13.0
    createdAt: 2019-01-24T15-02-14Z
    support: gsemet
  name: airflow.v0.13.0
  namespace: default
spec:
  customresourcedefinitions:
    owned:
    - description: Airflow
      displayName: airflow
      kind: Airflow
      name: airflows.charts.helm.k8s.io
      version: v1alpha1
  keywords:
  - helm
  displayName: airflow
  provider:
    name: Helm Community
  maturity: stable
  version: 0.13.0
  links:
  - name: Helm Chart Source
    url: https://airflow.apache.org/
  installModes:
  - type: OwnNamespace
    supported: true
  - type: SingleNamespace
    supported: true
  - type: MultiNamespace
    supported: false
  - type: AllNamespaces
    supported: true
  maintainers:
  - email: gaetan@xeberon.net
    name: gsemet
  selector:
    matchLabels:
      alm-owner-etcd: couchbaseoperator
      operated-by: couchbaseoperator
  labels:
    alm-owner-etcd: couchbaseoperator
    operated-by: couchbaseoperator
  install:
    spec:
      deployments:
      - name: airflow-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              name: airflow
          template:
            metadata:
              labels:
                name: airflow
            spec:
              serviceAccountName: airflow-operator
              containers:
              - name: airflow
                image: quay.io/helmoperators/airflow:0.13.0
                ports:
                - containerPort: 60000
                  name: metrics
                imagePullPolicy: Always
                env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: OPERATOR_NAME
                  value: airflow
      clusterPermissions:
      - rules:
        - verbs:
          - use
          apiGroups:
          - security.openshift.io
          resources:
          - securitycontextconstraints
          resourceNames:
          - privileged
        serviceAccountName: airflow-operator
      permissions:
      - rules:
        - apiGroups:
          - charts.helm.k8s.io
          resources:
          - airflows
          verbs:
          - '*'
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - '*'
        - apiGroups:
          - ""
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - apps
          resources:
          - deployments
          verbs:
          - '*'
        serviceAccountName: airflow-operator
    strategy: deployment
  description: |
    Airflow is a platform to programmatically author, schedule and monitor workflows
    
    _This was generated from a Helm chart automatically._
    
    Many HElm charts require running a root, your admin will need to allow this with a SecurityContextConstraint.
